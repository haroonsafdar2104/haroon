{"ast":null,"code":"import $ from '../../shared/dom.js';\nimport { setCSSProperty } from '../../shared/utils.js';\nexport default function Virtual(_ref) {\n  var swiper = _ref.swiper,\n      extendParams = _ref.extendParams,\n      on = _ref.on,\n      emit = _ref.emit;\n  extendParams({\n    virtual: {\n      enabled: false,\n      slides: [],\n      cache: true,\n      renderSlide: null,\n      renderExternal: null,\n      renderExternalUpdate: true,\n      addSlidesBefore: 0,\n      addSlidesAfter: 0\n    }\n  });\n  var cssModeTimeout;\n  swiper.virtual = {\n    cache: {},\n    from: undefined,\n    to: undefined,\n    slides: [],\n    offset: 0,\n    slidesGrid: []\n  };\n\n  function renderSlide(slide, index) {\n    var params = swiper.params.virtual;\n\n    if (params.cache && swiper.virtual.cache[index]) {\n      return swiper.virtual.cache[index];\n    }\n\n    var $slideEl = params.renderSlide ? $(params.renderSlide.call(swiper, slide, index)) : $(\"<div class=\\\"\".concat(swiper.params.slideClass, \"\\\" data-swiper-slide-index=\\\"\").concat(index, \"\\\">\").concat(slide, \"</div>\"));\n    if (!$slideEl.attr('data-swiper-slide-index')) $slideEl.attr('data-swiper-slide-index', index);\n    if (params.cache) swiper.virtual.cache[index] = $slideEl;\n    return $slideEl;\n  }\n\n  function update(force) {\n    var _swiper$params = swiper.params,\n        slidesPerView = _swiper$params.slidesPerView,\n        slidesPerGroup = _swiper$params.slidesPerGroup,\n        centeredSlides = _swiper$params.centeredSlides;\n    var _swiper$params$virtua = swiper.params.virtual,\n        addSlidesBefore = _swiper$params$virtua.addSlidesBefore,\n        addSlidesAfter = _swiper$params$virtua.addSlidesAfter;\n    var _swiper$virtual = swiper.virtual,\n        previousFrom = _swiper$virtual.from,\n        previousTo = _swiper$virtual.to,\n        slides = _swiper$virtual.slides,\n        previousSlidesGrid = _swiper$virtual.slidesGrid,\n        previousOffset = _swiper$virtual.offset;\n\n    if (!swiper.params.cssMode) {\n      swiper.updateActiveIndex();\n    }\n\n    var activeIndex = swiper.activeIndex || 0;\n    var offsetProp;\n    if (swiper.rtlTranslate) offsetProp = 'right';else offsetProp = swiper.isHorizontal() ? 'left' : 'top';\n    var slidesAfter;\n    var slidesBefore;\n\n    if (centeredSlides) {\n      slidesAfter = Math.floor(slidesPerView / 2) + slidesPerGroup + addSlidesAfter;\n      slidesBefore = Math.floor(slidesPerView / 2) + slidesPerGroup + addSlidesBefore;\n    } else {\n      slidesAfter = slidesPerView + (slidesPerGroup - 1) + addSlidesAfter;\n      slidesBefore = slidesPerGroup + addSlidesBefore;\n    }\n\n    var from = Math.max((activeIndex || 0) - slidesBefore, 0);\n    var to = Math.min((activeIndex || 0) + slidesAfter, slides.length - 1);\n    var offset = (swiper.slidesGrid[from] || 0) - (swiper.slidesGrid[0] || 0);\n    Object.assign(swiper.virtual, {\n      from: from,\n      to: to,\n      offset: offset,\n      slidesGrid: swiper.slidesGrid\n    });\n\n    function onRendered() {\n      swiper.updateSlides();\n      swiper.updateProgress();\n      swiper.updateSlidesClasses();\n\n      if (swiper.lazy && swiper.params.lazy.enabled) {\n        swiper.lazy.load();\n      }\n\n      emit('virtualUpdate');\n    }\n\n    if (previousFrom === from && previousTo === to && !force) {\n      if (swiper.slidesGrid !== previousSlidesGrid && offset !== previousOffset) {\n        swiper.slides.css(offsetProp, \"\".concat(offset, \"px\"));\n      }\n\n      swiper.updateProgress();\n      emit('virtualUpdate');\n      return;\n    }\n\n    if (swiper.params.virtual.renderExternal) {\n      swiper.params.virtual.renderExternal.call(swiper, {\n        offset: offset,\n        from: from,\n        to: to,\n        slides: function getSlides() {\n          var slidesToRender = [];\n\n          for (var i = from; i <= to; i += 1) {\n            slidesToRender.push(slides[i]);\n          }\n\n          return slidesToRender;\n        }()\n      });\n\n      if (swiper.params.virtual.renderExternalUpdate) {\n        onRendered();\n      } else {\n        emit('virtualUpdate');\n      }\n\n      return;\n    }\n\n    var prependIndexes = [];\n    var appendIndexes = [];\n\n    if (force) {\n      swiper.$wrapperEl.find(\".\".concat(swiper.params.slideClass)).remove();\n    } else {\n      for (var i = previousFrom; i <= previousTo; i += 1) {\n        if (i < from || i > to) {\n          swiper.$wrapperEl.find(\".\".concat(swiper.params.slideClass, \"[data-swiper-slide-index=\\\"\").concat(i, \"\\\"]\")).remove();\n        }\n      }\n    }\n\n    for (var _i = 0; _i < slides.length; _i += 1) {\n      if (_i >= from && _i <= to) {\n        if (typeof previousTo === 'undefined' || force) {\n          appendIndexes.push(_i);\n        } else {\n          if (_i > previousTo) appendIndexes.push(_i);\n          if (_i < previousFrom) prependIndexes.push(_i);\n        }\n      }\n    }\n\n    appendIndexes.forEach(function (index) {\n      swiper.$wrapperEl.append(renderSlide(slides[index], index));\n    });\n    prependIndexes.sort(function (a, b) {\n      return b - a;\n    }).forEach(function (index) {\n      swiper.$wrapperEl.prepend(renderSlide(slides[index], index));\n    });\n    swiper.$wrapperEl.children('.swiper-slide').css(offsetProp, \"\".concat(offset, \"px\"));\n    onRendered();\n  }\n\n  function appendSlide(slides) {\n    if (typeof slides === 'object' && 'length' in slides) {\n      for (var i = 0; i < slides.length; i += 1) {\n        if (slides[i]) swiper.virtual.slides.push(slides[i]);\n      }\n    } else {\n      swiper.virtual.slides.push(slides);\n    }\n\n    update(true);\n  }\n\n  function prependSlide(slides) {\n    var activeIndex = swiper.activeIndex;\n    var newActiveIndex = activeIndex + 1;\n    var numberOfNewSlides = 1;\n\n    if (Array.isArray(slides)) {\n      for (var i = 0; i < slides.length; i += 1) {\n        if (slides[i]) swiper.virtual.slides.unshift(slides[i]);\n      }\n\n      newActiveIndex = activeIndex + slides.length;\n      numberOfNewSlides = slides.length;\n    } else {\n      swiper.virtual.slides.unshift(slides);\n    }\n\n    if (swiper.params.virtual.cache) {\n      var cache = swiper.virtual.cache;\n      var newCache = {};\n      Object.keys(cache).forEach(function (cachedIndex) {\n        var $cachedEl = cache[cachedIndex];\n        var cachedElIndex = $cachedEl.attr('data-swiper-slide-index');\n\n        if (cachedElIndex) {\n          $cachedEl.attr('data-swiper-slide-index', parseInt(cachedElIndex, 10) + numberOfNewSlides);\n        }\n\n        newCache[parseInt(cachedIndex, 10) + numberOfNewSlides] = $cachedEl;\n      });\n      swiper.virtual.cache = newCache;\n    }\n\n    update(true);\n    swiper.slideTo(newActiveIndex, 0);\n  }\n\n  function removeSlide(slidesIndexes) {\n    if (typeof slidesIndexes === 'undefined' || slidesIndexes === null) return;\n    var activeIndex = swiper.activeIndex;\n\n    if (Array.isArray(slidesIndexes)) {\n      for (var i = slidesIndexes.length - 1; i >= 0; i -= 1) {\n        swiper.virtual.slides.splice(slidesIndexes[i], 1);\n\n        if (swiper.params.virtual.cache) {\n          delete swiper.virtual.cache[slidesIndexes[i]];\n        }\n\n        if (slidesIndexes[i] < activeIndex) activeIndex -= 1;\n        activeIndex = Math.max(activeIndex, 0);\n      }\n    } else {\n      swiper.virtual.slides.splice(slidesIndexes, 1);\n\n      if (swiper.params.virtual.cache) {\n        delete swiper.virtual.cache[slidesIndexes];\n      }\n\n      if (slidesIndexes < activeIndex) activeIndex -= 1;\n      activeIndex = Math.max(activeIndex, 0);\n    }\n\n    update(true);\n    swiper.slideTo(activeIndex, 0);\n  }\n\n  function removeAllSlides() {\n    swiper.virtual.slides = [];\n\n    if (swiper.params.virtual.cache) {\n      swiper.virtual.cache = {};\n    }\n\n    update(true);\n    swiper.slideTo(0, 0);\n  }\n\n  on('beforeInit', function () {\n    if (!swiper.params.virtual.enabled) return;\n    swiper.virtual.slides = swiper.params.virtual.slides;\n    swiper.classNames.push(\"\".concat(swiper.params.containerModifierClass, \"virtual\"));\n    swiper.params.watchSlidesProgress = true;\n    swiper.originalParams.watchSlidesProgress = true;\n\n    if (!swiper.params.initialSlide) {\n      update();\n    }\n  });\n  on('setTranslate', function () {\n    if (!swiper.params.virtual.enabled) return;\n\n    if (swiper.params.cssMode && !swiper._immediateVirtual) {\n      clearTimeout(cssModeTimeout);\n      cssModeTimeout = setTimeout(function () {\n        update();\n      }, 100);\n    } else {\n      update();\n    }\n  });\n  on('init update resize', function () {\n    if (!swiper.params.virtual.enabled) return;\n\n    if (swiper.params.cssMode) {\n      setCSSProperty(swiper.wrapperEl, '--swiper-virtual-size', \"\".concat(swiper.virtualSize, \"px\"));\n    }\n  });\n  Object.assign(swiper.virtual, {\n    appendSlide: appendSlide,\n    prependSlide: prependSlide,\n    removeSlide: removeSlide,\n    removeAllSlides: removeAllSlides,\n    update: update\n  });\n}","map":{"version":3,"sources":["D:/Web Data/Personal-Website/client/node_modules/swiper/modules/virtual/virtual.js"],"names":["$","setCSSProperty","Virtual","_ref","swiper","extendParams","on","emit","virtual","enabled","slides","cache","renderSlide","renderExternal","renderExternalUpdate","addSlidesBefore","addSlidesAfter","cssModeTimeout","from","undefined","to","offset","slidesGrid","slide","index","params","$slideEl","call","slideClass","attr","update","force","slidesPerView","slidesPerGroup","centeredSlides","previousFrom","previousTo","previousSlidesGrid","previousOffset","cssMode","updateActiveIndex","activeIndex","offsetProp","rtlTranslate","isHorizontal","slidesAfter","slidesBefore","Math","floor","max","min","length","Object","assign","onRendered","updateSlides","updateProgress","updateSlidesClasses","lazy","load","css","getSlides","slidesToRender","i","push","prependIndexes","appendIndexes","$wrapperEl","find","remove","forEach","append","sort","a","b","prepend","children","appendSlide","prependSlide","newActiveIndex","numberOfNewSlides","Array","isArray","unshift","newCache","keys","cachedIndex","$cachedEl","cachedElIndex","parseInt","slideTo","removeSlide","slidesIndexes","splice","removeAllSlides","classNames","containerModifierClass","watchSlidesProgress","originalParams","initialSlide","_immediateVirtual","clearTimeout","setTimeout","wrapperEl","virtualSize"],"mappings":"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","sourcesContent":["import $ from '../../shared/dom.js';\nimport { setCSSProperty } from '../../shared/utils.js';\nexport default function Virtual(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on,\n    emit\n  } = _ref;\n  extendParams({\n    virtual: {\n      enabled: false,\n      slides: [],\n      cache: true,\n      renderSlide: null,\n      renderExternal: null,\n      renderExternalUpdate: true,\n      addSlidesBefore: 0,\n      addSlidesAfter: 0\n    }\n  });\n  let cssModeTimeout;\n  swiper.virtual = {\n    cache: {},\n    from: undefined,\n    to: undefined,\n    slides: [],\n    offset: 0,\n    slidesGrid: []\n  };\n\n  function renderSlide(slide, index) {\n    const params = swiper.params.virtual;\n\n    if (params.cache && swiper.virtual.cache[index]) {\n      return swiper.virtual.cache[index];\n    }\n\n    const $slideEl = params.renderSlide ? $(params.renderSlide.call(swiper, slide, index)) : $(`<div class=\"${swiper.params.slideClass}\" data-swiper-slide-index=\"${index}\">${slide}</div>`);\n    if (!$slideEl.attr('data-swiper-slide-index')) $slideEl.attr('data-swiper-slide-index', index);\n    if (params.cache) swiper.virtual.cache[index] = $slideEl;\n    return $slideEl;\n  }\n\n  function update(force) {\n    const {\n      slidesPerView,\n      slidesPerGroup,\n      centeredSlides\n    } = swiper.params;\n    const {\n      addSlidesBefore,\n      addSlidesAfter\n    } = swiper.params.virtual;\n    const {\n      from: previousFrom,\n      to: previousTo,\n      slides,\n      slidesGrid: previousSlidesGrid,\n      offset: previousOffset\n    } = swiper.virtual;\n\n    if (!swiper.params.cssMode) {\n      swiper.updateActiveIndex();\n    }\n\n    const activeIndex = swiper.activeIndex || 0;\n    let offsetProp;\n    if (swiper.rtlTranslate) offsetProp = 'right';else offsetProp = swiper.isHorizontal() ? 'left' : 'top';\n    let slidesAfter;\n    let slidesBefore;\n\n    if (centeredSlides) {\n      slidesAfter = Math.floor(slidesPerView / 2) + slidesPerGroup + addSlidesAfter;\n      slidesBefore = Math.floor(slidesPerView / 2) + slidesPerGroup + addSlidesBefore;\n    } else {\n      slidesAfter = slidesPerView + (slidesPerGroup - 1) + addSlidesAfter;\n      slidesBefore = slidesPerGroup + addSlidesBefore;\n    }\n\n    const from = Math.max((activeIndex || 0) - slidesBefore, 0);\n    const to = Math.min((activeIndex || 0) + slidesAfter, slides.length - 1);\n    const offset = (swiper.slidesGrid[from] || 0) - (swiper.slidesGrid[0] || 0);\n    Object.assign(swiper.virtual, {\n      from,\n      to,\n      offset,\n      slidesGrid: swiper.slidesGrid\n    });\n\n    function onRendered() {\n      swiper.updateSlides();\n      swiper.updateProgress();\n      swiper.updateSlidesClasses();\n\n      if (swiper.lazy && swiper.params.lazy.enabled) {\n        swiper.lazy.load();\n      }\n\n      emit('virtualUpdate');\n    }\n\n    if (previousFrom === from && previousTo === to && !force) {\n      if (swiper.slidesGrid !== previousSlidesGrid && offset !== previousOffset) {\n        swiper.slides.css(offsetProp, `${offset}px`);\n      }\n\n      swiper.updateProgress();\n      emit('virtualUpdate');\n      return;\n    }\n\n    if (swiper.params.virtual.renderExternal) {\n      swiper.params.virtual.renderExternal.call(swiper, {\n        offset,\n        from,\n        to,\n        slides: function getSlides() {\n          const slidesToRender = [];\n\n          for (let i = from; i <= to; i += 1) {\n            slidesToRender.push(slides[i]);\n          }\n\n          return slidesToRender;\n        }()\n      });\n\n      if (swiper.params.virtual.renderExternalUpdate) {\n        onRendered();\n      } else {\n        emit('virtualUpdate');\n      }\n\n      return;\n    }\n\n    const prependIndexes = [];\n    const appendIndexes = [];\n\n    if (force) {\n      swiper.$wrapperEl.find(`.${swiper.params.slideClass}`).remove();\n    } else {\n      for (let i = previousFrom; i <= previousTo; i += 1) {\n        if (i < from || i > to) {\n          swiper.$wrapperEl.find(`.${swiper.params.slideClass}[data-swiper-slide-index=\"${i}\"]`).remove();\n        }\n      }\n    }\n\n    for (let i = 0; i < slides.length; i += 1) {\n      if (i >= from && i <= to) {\n        if (typeof previousTo === 'undefined' || force) {\n          appendIndexes.push(i);\n        } else {\n          if (i > previousTo) appendIndexes.push(i);\n          if (i < previousFrom) prependIndexes.push(i);\n        }\n      }\n    }\n\n    appendIndexes.forEach(index => {\n      swiper.$wrapperEl.append(renderSlide(slides[index], index));\n    });\n    prependIndexes.sort((a, b) => b - a).forEach(index => {\n      swiper.$wrapperEl.prepend(renderSlide(slides[index], index));\n    });\n    swiper.$wrapperEl.children('.swiper-slide').css(offsetProp, `${offset}px`);\n    onRendered();\n  }\n\n  function appendSlide(slides) {\n    if (typeof slides === 'object' && 'length' in slides) {\n      for (let i = 0; i < slides.length; i += 1) {\n        if (slides[i]) swiper.virtual.slides.push(slides[i]);\n      }\n    } else {\n      swiper.virtual.slides.push(slides);\n    }\n\n    update(true);\n  }\n\n  function prependSlide(slides) {\n    const activeIndex = swiper.activeIndex;\n    let newActiveIndex = activeIndex + 1;\n    let numberOfNewSlides = 1;\n\n    if (Array.isArray(slides)) {\n      for (let i = 0; i < slides.length; i += 1) {\n        if (slides[i]) swiper.virtual.slides.unshift(slides[i]);\n      }\n\n      newActiveIndex = activeIndex + slides.length;\n      numberOfNewSlides = slides.length;\n    } else {\n      swiper.virtual.slides.unshift(slides);\n    }\n\n    if (swiper.params.virtual.cache) {\n      const cache = swiper.virtual.cache;\n      const newCache = {};\n      Object.keys(cache).forEach(cachedIndex => {\n        const $cachedEl = cache[cachedIndex];\n        const cachedElIndex = $cachedEl.attr('data-swiper-slide-index');\n\n        if (cachedElIndex) {\n          $cachedEl.attr('data-swiper-slide-index', parseInt(cachedElIndex, 10) + numberOfNewSlides);\n        }\n\n        newCache[parseInt(cachedIndex, 10) + numberOfNewSlides] = $cachedEl;\n      });\n      swiper.virtual.cache = newCache;\n    }\n\n    update(true);\n    swiper.slideTo(newActiveIndex, 0);\n  }\n\n  function removeSlide(slidesIndexes) {\n    if (typeof slidesIndexes === 'undefined' || slidesIndexes === null) return;\n    let activeIndex = swiper.activeIndex;\n\n    if (Array.isArray(slidesIndexes)) {\n      for (let i = slidesIndexes.length - 1; i >= 0; i -= 1) {\n        swiper.virtual.slides.splice(slidesIndexes[i], 1);\n\n        if (swiper.params.virtual.cache) {\n          delete swiper.virtual.cache[slidesIndexes[i]];\n        }\n\n        if (slidesIndexes[i] < activeIndex) activeIndex -= 1;\n        activeIndex = Math.max(activeIndex, 0);\n      }\n    } else {\n      swiper.virtual.slides.splice(slidesIndexes, 1);\n\n      if (swiper.params.virtual.cache) {\n        delete swiper.virtual.cache[slidesIndexes];\n      }\n\n      if (slidesIndexes < activeIndex) activeIndex -= 1;\n      activeIndex = Math.max(activeIndex, 0);\n    }\n\n    update(true);\n    swiper.slideTo(activeIndex, 0);\n  }\n\n  function removeAllSlides() {\n    swiper.virtual.slides = [];\n\n    if (swiper.params.virtual.cache) {\n      swiper.virtual.cache = {};\n    }\n\n    update(true);\n    swiper.slideTo(0, 0);\n  }\n\n  on('beforeInit', () => {\n    if (!swiper.params.virtual.enabled) return;\n    swiper.virtual.slides = swiper.params.virtual.slides;\n    swiper.classNames.push(`${swiper.params.containerModifierClass}virtual`);\n    swiper.params.watchSlidesProgress = true;\n    swiper.originalParams.watchSlidesProgress = true;\n\n    if (!swiper.params.initialSlide) {\n      update();\n    }\n  });\n  on('setTranslate', () => {\n    if (!swiper.params.virtual.enabled) return;\n\n    if (swiper.params.cssMode && !swiper._immediateVirtual) {\n      clearTimeout(cssModeTimeout);\n      cssModeTimeout = setTimeout(() => {\n        update();\n      }, 100);\n    } else {\n      update();\n    }\n  });\n  on('init update resize', () => {\n    if (!swiper.params.virtual.enabled) return;\n\n    if (swiper.params.cssMode) {\n      setCSSProperty(swiper.wrapperEl, '--swiper-virtual-size', `${swiper.virtualSize}px`);\n    }\n  });\n  Object.assign(swiper.virtual, {\n    appendSlide,\n    prependSlide,\n    removeSlide,\n    removeAllSlides,\n    update\n  });\n}"]},"metadata":{},"sourceType":"module"}