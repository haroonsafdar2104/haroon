{"ast":null,"code":"import _createForOfIteratorHelper from \"D:/Web Data/Personal-Website/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport { __rest } from 'tslib';\nimport { resize } from '../resize/index.es.js';\nimport { createScrollInfo } from './info.es.js';\nimport { createOnScrollHandler } from './on-scroll-handler.es.js';\nvar scrollListeners = new WeakMap();\nvar resizeListeners = new WeakMap();\nvar onScrollHandlers = new WeakMap();\n\nvar getEventTarget = function getEventTarget(element) {\n  return element === document.documentElement ? window : element;\n};\n\nfunction scroll(onScroll) {\n  var _a = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _a$container = _a.container,\n      container = _a$container === void 0 ? document.documentElement : _a$container,\n      options = __rest(_a, [\"container\"]);\n\n  var containerHandlers = onScrollHandlers.get(container);\n  /**\n   * Get the onScroll handlers for this container.\n   * If one isn't found, create a new one.\n   */\n\n  if (!containerHandlers) {\n    containerHandlers = new Set();\n    onScrollHandlers.set(container, containerHandlers);\n  }\n  /**\n   * Create a new onScroll handler for the provided callback.\n   */\n\n\n  var info = createScrollInfo();\n  var containerHandler = createOnScrollHandler(container, onScroll, info, options);\n  containerHandlers.add(containerHandler);\n  /**\n   * Check if there's a scroll event listener for this container.\n   * If not, create one.\n   */\n\n  if (!scrollListeners.has(container)) {\n    var _listener = function _listener() {\n      var time = performance.now();\n\n      var _iterator = _createForOfIteratorHelper(containerHandlers),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var handler = _step.value;\n          handler.measure();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      var _iterator2 = _createForOfIteratorHelper(containerHandlers),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _handler = _step2.value;\n\n          _handler.update(time);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var _iterator3 = _createForOfIteratorHelper(containerHandlers),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _handler2 = _step3.value;\n\n          _handler2.notify();\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    };\n\n    scrollListeners.set(container, _listener);\n    var target = getEventTarget(container);\n    window.addEventListener(\"resize\", _listener, {\n      passive: true\n    });\n\n    if (container !== document.documentElement) {\n      resizeListeners.set(container, resize(container, _listener));\n    }\n\n    target.addEventListener(\"scroll\", _listener, {\n      passive: true\n    });\n  }\n\n  var listener = scrollListeners.get(container);\n  var onLoadProcesss = requestAnimationFrame(listener);\n  return function () {\n    var _a;\n\n    if (typeof onScroll !== \"function\") onScroll.stop();\n    cancelAnimationFrame(onLoadProcesss);\n    /**\n     * Check if we even have any handlers for this container.\n     */\n\n    var containerHandlers = onScrollHandlers.get(container);\n    if (!containerHandlers) return;\n    containerHandlers.delete(containerHandler);\n    if (containerHandlers.size) return;\n    /**\n     * If no more handlers, remove the scroll listener too.\n     */\n\n    var listener = scrollListeners.get(container);\n    scrollListeners.delete(container);\n\n    if (listener) {\n      getEventTarget(container).removeEventListener(\"scroll\", listener);\n      (_a = resizeListeners.get(container)) === null || _a === void 0 ? void 0 : _a();\n      window.removeEventListener(\"resize\", listener);\n    }\n  };\n}\n\nexport { scroll };","map":{"version":3,"sources":["D:/Web Data/Personal-Website/client/node_modules/@motionone/dom/dist/gestures/scroll/index.es.js"],"names":["__rest","resize","createScrollInfo","createOnScrollHandler","scrollListeners","WeakMap","resizeListeners","onScrollHandlers","getEventTarget","element","document","documentElement","window","scroll","onScroll","_a","container","options","containerHandlers","get","Set","set","info","containerHandler","add","has","listener","time","performance","now","handler","measure","update","notify","target","addEventListener","passive","onLoadProcesss","requestAnimationFrame","stop","cancelAnimationFrame","delete","size","removeEventListener"],"mappings":"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","sourcesContent":["import { __rest } from 'tslib';\nimport { resize } from '../resize/index.es.js';\nimport { createScrollInfo } from './info.es.js';\nimport { createOnScrollHandler } from './on-scroll-handler.es.js';\n\nconst scrollListeners = new WeakMap();\nconst resizeListeners = new WeakMap();\nconst onScrollHandlers = new WeakMap();\nconst getEventTarget = (element) => element === document.documentElement ? window : element;\nfunction scroll(onScroll, _a = {}) {\n    var { container = document.documentElement } = _a, options = __rest(_a, [\"container\"]);\n    let containerHandlers = onScrollHandlers.get(container);\n    /**\n     * Get the onScroll handlers for this container.\n     * If one isn't found, create a new one.\n     */\n    if (!containerHandlers) {\n        containerHandlers = new Set();\n        onScrollHandlers.set(container, containerHandlers);\n    }\n    /**\n     * Create a new onScroll handler for the provided callback.\n     */\n    const info = createScrollInfo();\n    const containerHandler = createOnScrollHandler(container, onScroll, info, options);\n    containerHandlers.add(containerHandler);\n    /**\n     * Check if there's a scroll event listener for this container.\n     * If not, create one.\n     */\n    if (!scrollListeners.has(container)) {\n        const listener = () => {\n            const time = performance.now();\n            for (const handler of containerHandlers)\n                handler.measure();\n            for (const handler of containerHandlers)\n                handler.update(time);\n            for (const handler of containerHandlers)\n                handler.notify();\n        };\n        scrollListeners.set(container, listener);\n        const target = getEventTarget(container);\n        window.addEventListener(\"resize\", listener, { passive: true });\n        if (container !== document.documentElement) {\n            resizeListeners.set(container, resize(container, listener));\n        }\n        target.addEventListener(\"scroll\", listener, { passive: true });\n    }\n    const listener = scrollListeners.get(container);\n    const onLoadProcesss = requestAnimationFrame(listener);\n    return () => {\n        var _a;\n        if (typeof onScroll !== \"function\")\n            onScroll.stop();\n        cancelAnimationFrame(onLoadProcesss);\n        /**\n         * Check if we even have any handlers for this container.\n         */\n        const containerHandlers = onScrollHandlers.get(container);\n        if (!containerHandlers)\n            return;\n        containerHandlers.delete(containerHandler);\n        if (containerHandlers.size)\n            return;\n        /**\n         * If no more handlers, remove the scroll listener too.\n         */\n        const listener = scrollListeners.get(container);\n        scrollListeners.delete(container);\n        if (listener) {\n            getEventTarget(container).removeEventListener(\"scroll\", listener);\n            (_a = resizeListeners.get(container)) === null || _a === void 0 ? void 0 : _a();\n            window.removeEventListener(\"resize\", listener);\n        }\n    };\n}\n\nexport { scroll };\n"]},"metadata":{},"sourceType":"module"}